<!DOCTYPE html>
<html>
<head>
	<title>Öğrenci Girişi</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.css">
    <link rel="stylesheet" type="text/css" href="style.css">

 
</head>
<body>

<!--NAVBAR-->

<div class="ui grey fixed inverted menu stackable" id="navbar">
 <div class="ui container main inverted secondary menu">
 	<div class="header item float left ui">
     <i class="github icon">Logo</i>
    </div>
    
    <a href="index.html" class="item">
      Anasayfa
    </a>
    <a href="ogretmen.html" class="item">
      Öğretmen Girişi
    </a>
    <a href="ogrenci.html" class="active item">
      Öğrenci Girişi
      
    </a>
    
  </div>
</div>

		<!--NAVBAR FINISH-->



<div class="ui middle aligned center aligned grid" >
  <div class="column">
    <h2 class="ui teal image header">
      <img src="images/ogrenci.png" class="image">
      <div class="content yesil">
        Hesabınıza giriş yapın
      </div>
    </h2>
    <form class="ui large form" >
      <div class="ui stacked segment">
        <div class="field">
          <div class="ui left icon input">
            <i class="user icon"> </i>&nbsp;&nbsp;
            <input type="text" name="email" id="email" placeholder="E-mail adresi">
          </div>
        </div>
        <div class="field">
          <div class="ui left icon input">
            <i class="lock icon"></i>&nbsp;&nbsp;
            <input type="password" name="password" id="password" placeholder="Şifre">
          </div>
        </div>
        <button class="ui fluid large teal submit button buttonrengi" id="loginbutton">Giriş yap</button>
      </div>

      <div class="ui error message"> </div>

    </form>

    <div class="ui message yesil">
      Şifremi <a href="#" class="yesil" >unuttum</a>
    </div>
  </div>
</div>




</div>
<script>
document.body.onload = function(){
var data = "";
var xhr = new XMLHttpRequest();
xhr.withCredentials = true;
xhr.addEventListener("readystatechange", function () {
  if (this.readyState === 4) {
    var response = JSON.parse(this.responseText);
    console.log(this.responseText);
    if(response.hasSession == "true"){
        window.location = "profil.html";
    
  }
}
});
xhr.open("POST", "http://188.226.129.227:3000/profil");
xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");
xhr.send(data);  
}
document.getElementById("loginbutton").onclick = function(event){
event.preventDefault();
var data = "email="+encodeURI(document.getElementById("email").value)+"&password="+encodeURI(document.getElementById("password").value);
var xhr = new XMLHttpRequest();
xhr.withCredentials = true;
xhr.addEventListener("readystatechange", function () {
  if (this.readyState === 4) {
    var response = JSON.parse(this.responseText);
    
    if(response.loginStatus == "success"){
        window.location = "profil.html";
    }
  }
});
xhr.open("POST", "http://188.226.129.227:3000/giris");
xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");
xhr.send(data);
}
</script> 
</body>
</html>